id: "postgresql"
aliases:
  - "psql"
  - "postgres"
  - "pgsql"
  - "postgre"
name: "PostgreSQL"
monacoLang: pgsql

repl: |
  rm -rf data && /usr/lib/postgresql/*/bin/initdb -D data && (echo "listen_addresses = ''" && echo "unix_socket_directories = '.'") >> data/postgresql.conf && /usr/lib/postgresql/*/bin/pg_ctl -D data -w start && psql -h "$PWD/data" postgres
input: |
  SELECT 123 * 234;

main: "main.sql"
template: |
  SELECT 'Hello, world!';

run: |
  rm -rf data && /usr/lib/postgresql/*/bin/initdb -D data && (echo "listen_addresses = ''" && echo "unix_socket_directories = '.'") >> data/postgresql.conf && /usr/lib/postgresql/*/bin/pg_ctl -D data -w start && (psql -h "$PWD/data" postgres -f main.sql; psql -h "$PWD/data" postgres)

lsp:
  start: |
    sqls

skip:
  - lsp
