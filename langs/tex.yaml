id: "tex"
aliases:
  - "latex"
  - "xetex"
  - "plaintex"
name: "TeX"

install:
  build:
    apt:
      - luarocks
      - $(grep-aptavail -eF Package "liblua[0-9.]+-dev" -a -XF Version "$(grep-aptavail -XF Provides lua -s Version -n | sort -Vr | head -n1)" -s Package -n | head -n1)
  apt:
    - texlive-binaries

repl: |
  tex
input: |
  \newcount\x
  \advance\x by 123
  \multiply\x by 234
  \message{\the\x}

main: "main.tex"
template: |
  \message{Hello, world!}

run: |
  tex main.tex

scope:
  code: |
    \newcount\x
    \advance\x by 123
    \multiply\x by 234
  input: |
    \message{\the\x}

lsp:
  start: |
    digestif
  lang: "tex"

skip:
  - lsp
